!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("is-numeric"),require("scrollmonitor")):"function"==typeof define&&define.amd?define(["is-numeric","scrollmonitor"],e):"object"==typeof exports?exports["vue-visual"]=e(require("is-numeric"),require("scrollmonitor")):t["vue-visual"]=e(t["is-numeric"],t.scrollmonitor)}(this,function(t,e){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,o;i(5),n=i(4);var r=i(16);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(o=n=n.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e){function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=i},function(t,e,i){var n=i(3),o=n.Symbol;t.exports=o},function(t,e,i){var n=i(7),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();t.exports=r},function(t,e,i){var n,o,r,s,a,u,c,d,l,h,f,v;a=i(17),d=i(18),f=i(14),c=[],window.onresize=function(){var t,e,i,n;for(i=[],t=0,e=c.length;t<e;t++)n=c[t],i.push(n.handleWindowResizeThrottled());return i},t.exports={props:{poster:[String,Object],image:[String,Object],video:[String,Object],fallback:[String,Object],width:[String,Number],height:[String,Number],aspect:[String,Number],render:String,renderPoster:String,renderImage:String,renderVideo:String,background:{type:String,validator:function(t){return"cover"===t||"contain"===t}},backgroundPosition:{type:String,default:"center center"},verticalAlign:{type:String,default:"middle"},load:{type:[String,Boolean],default:!0},loadPoster:{type:[String,Boolean],default:null},loadImage:{type:[String,Boolean],default:null},loadVideo:{type:[String,Boolean],default:null},transition:String,transitionPoster:String,transitionImage:String,transitionVideo:String,autoplay:[String,Boolean],autopause:String,loop:Boolean,muted:Boolean,controls:Boolean,requireAutoplay:Boolean},data:function(){return{posterLoading:!1,posterLoaded:!1,imageLoading:!1,imageLoaded:!1,videoLoading:!1,videoLoaded:!1,fallbackLoading:!1,fallbackLoaded:!1,posterInViewport:null,imageInViewport:null,videoInViewport:null,windowWidth:null,containerWidth:null,containerHeight:null,videoNativeWidth:null,videoNativeHeight:null}},mounted:function(){return(this.shouldWatchComponentSize||this.hasResponsiveAsset)&&(c.push(this),this.handleWindowResize(),this.handleWindowResizeThrottled=f(this.handleWindowResize,100)),["poster","image","video","fallback"].forEach(function(t){return function(e){return t.$watch(e+"ShouldLoad",function(i){if(i)return t.loadAsset(e)},{immediate:!0})}}(this)),["poster","image","video"].forEach(function(t){return function(e){return t.$watch(function(){return t.assetScrollId(e)},function(i){return i?t.addScrollListeners(e):t.removeScrollListeners(e)},{immediate:!0})}}(this)),["poster","image","fallback"].forEach(function(t){return function(e){return t.$watch(e+"Src",function(){if(t.resetImgAsset(e),t[e+"ShouldLoad"])return t.loadAsset(e)})}}(this))},destroyed:function(){var t,e,i,n;for(n=["poster","image","video"],e=0,i=n.length;e<i;e++)t=n[e],this.removeScrollListeners(t);return c.splice(c.indexOf(this),1)},computed:{containerStyles:function(){return{width:l(this.width),height:l(this.height)}},containerClasses:function(){return{"vv-has-width":this.width,"vv-has-height":this.height,"vv-has-aspect":this.aspect,"vv-background-cover":"cover"===this.background,"vv-background-contain":"contain"===this.background,"vv-video-letterbox":"letterbox"===this.videoContainEffect,"vv-video-pillarbox":"pillarbox"===this.videoContainEffect,"vv-poster-loading":this.posterLoading,"vv-poster-loaded":this.posterLoaded,"vv-image-loading":this.imageLoading,"vv-image-loaded":this.imageLoaded,"vv-video-loading":this.videoLoading,"vv-video-loaded":this.videoLoaded,"vv-fallback-loading":this.fallbackLoading,"vv-fallback-loaded":this.fallbackLoaded}},posterSrc:function(){return this.imgSrc("poster")},posterShouldRender:function(){switch(!1){case!(this.imageShouldRender||this.videoShouldRender||this.fallbackShouldRender):return!1;default:return this.assetShouldRender("poster")}},posterShouldLoad:function(){return this.assetReadyToLoad("poster")},imageSrc:function(){return this.imgSrc("image")},imageShouldRender:function(){switch(!1){case!(this.videoShouldRender||this.fallbackShouldRender):return!1;default:return this.assetShouldRender("image")}},imageShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded):return!1;default:return this.assetReadyToLoad("image")}},videoShouldRender:function(){switch(!1){case!this.useFallback:return!1;default:return this.assetShouldRender("video")}},videoShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):return!1;case!this.useFallback:return!1;default:return this.assetReadyToLoad("video")}},fallbackSrc:function(){return this.imgSrc("fallback")},fallbackShouldRender:function(){switch(!1){case!!this.useFallback:return!1;default:return this.assetShouldRender("fallback")}},fallbackShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):return!1;case!!this.useFallback:return!1;default:return this.assetReadyToLoad("fallback")}},useFallback:function(){switch(!1){case!!this.fallback:return!1;case!!this.canPlayVideo:return!0;case!(this.requireAutoplay&&!o()):return!0}},canPlayVideo:function(){var t,e,i,n;for(i=this.videoSources,t=0,e=i.length;t<e;t++)if(n=i[t],r(n))return!0;return!1},videoSources:function(){switch(!1){case!!this.video:return[];case"string"!=typeof this.video:return[this.video];case"array"!=typeof this.video:return this.video}},shouldWatchComponentSize:function(){switch(!1){case!this.aspect:return!1;case!(this.video&&this.background):return!0}},hasResponsiveAsset:function(){var t,e,i,n;for(n=["poster","image","fallback"],e=0,i=n.length;e<i;e++)if(t=n[e],"object"==typeof this[t])return!0},containerAspect:function(){switch(!1){case!this.aspect:return this.aspectProp;default:return this.containerWidth/this.containerHeight}},aspectProp:function(){switch(!1){case!!this.aspect:return;case!a(this.aspect):return this.aspect;case!this.aspect.match(":"):return n(this.aspect)}},aspectPadding:function(){if(this.aspectProp)return 1/this.aspectProp*100+"%"},videoNativeAspect:function(){return this.videoNativeWidth/this.videoNativeHeight},videoContainEffect:function(){if(this.videoNativeAspect)return this.containerAspect>this.videoNativeAspect?"pillarbox":"letterbox"}},methods:{assetShouldRender:function(t){var e;switch(e="load"===this.assetPropVal(t,"render"),this.assetPropVal(t,"transition")&&(e=!0),!1){case!!this[t]:return!1;case!(e&&this[t+"Loaded"]):return!0;case!!e:return!0}},backgroundStyles:function(t){return{backgroundImage:"url('"+this[t+"Src"]+"')",backgroundPosition:this.backgroundPosition}},imgSrc:function(t){var e,i,n,o;if(this[t]){if("string"==typeof this[t])return this[t];e=h(this[t]),i=s(e);for(o in e){if(n=e[o],o>=this.windowWidth)return i;i=n}return i}},assetReadyToLoad:function(t){var e,i;switch(e=this.assetPropVal(t,"load")===!0,i="visible"===this.assetPropVal(t,"load"),!1){case!!this[t]:return!1;case!e:return!0;case!(i&&this[t+"InViewport"]):return!0}},loadAsset:function(t){switch(t){case this[t+"Loaded"]:return!0;case"video":return this.loadVideoAsset(t);default:return this.loadImgAsset(t)}},loadVideoAsset:function(t){return this[t+"Loading"]=!0,this.$refs.video.oncanplaythrough=function(e){return function(){return e[t+"Loading"]=!1,e[t+"Loaded"]=!0,delete e.$refs.video.oncanplaythrough}}(this),this.$refs.video.onloadedmetadata=function(t){return function(){return delete t.$refs.video.onloadedmetadata,t.videoNativeWidth=t.$refs.video.videoWidth,t.videoNativeHeight=t.$refs.video.videoHeight}}(this),this.$refs.video.load()},loadImgAsset:function(t){return this[t+"Loading"]=!0,this[t+"Loader"]=new Image,this[t+"Loader"].onload=function(e){return function(){return e[t+"Loading"]=!1,e[t+"Loaded"]=!0,delete e[t+"Loader"].onload}}(this),this[t+"Loader"].src=this[t+"Src"]},resetImgAsset:function(t){return this[t+"Loader"]&&delete this[t+"Loader"].onload,this[t+"Loading"]=!1,this[t+"Loaded"]=!1},assetScrollId:function(t){var e;if(this.assetUsesScroll(t))return e=this.assetPropVal(t,"offset"),JSON.stringify(e)},assetUsesScroll:function(t){switch(!1){case"visible"!==this.assetPropVal(t,"load"):return!0;case!("video"===t&&"visible"===this.autoplay):return!0;case!("video"===t&&"visible"===this.autopause):return!0}},addScrollListeners:function(t){var e;if(this.removeScrollListeners(t),this.$el)return e=this.assetPropVal(t,"offset"),this[t+"scrollMonitor"]=d.create(this.$el,e),this[t+"inViewport"]=this[t+"scrollMonitor"].isInViewport,this.posterScrollMonitor.on("visibilityChange",function(e){return function(){return e[t+"inViewport"]=e[t+"scrollMonitor"].isInViewport}}(this))},removeScrollListeners:function(t){if(this[t+"scrollMonitor"])return this[t+"scrollMonitor"].destroy()},handleWindowResize:function(){if(this.windowWidth=window.innerWidth,this.shouldWatchComponentSize)return this.updateContainerSize()},updateContainerSize:function(){return this.containerWidth=this.$el.offsetWidth,this.containerHeight=this.$el.offsetHeight},assetPropVal:function(t,e){var i,n;return i=e+v(t),null!=(n=this[i])?n:this[e]},mime:function(t){return u(t)}},setDefaults:function(t){var e,i,n;i=[];for(e in t)n=t[e],i.push(this.props[e].default=n);return i}},l=function(t){if(t)return a(t)?t+"px":t},n=function(t){var e;return e=t.split(":"),parseInt(e[0],10)/parseInt(e[1],10)},r=function(t){var e;return e=document.createElement("video"),"no"!==(null!=e?e.canPlayType(u(t)):void 0)},u=function(t){var e;switch(null!=(e=t.match(/\.(\w+)/))?e[1]:void 0){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},o=function(){return!navigator.userAgent.match(/Mobile|Android|BlackBerry/i)},v=function(t){return t&&t[0].toUpperCase()+t.slice(1)},h=function(t){var e;return e={},Object.keys(t).sort().forEach(function(i){return function(i){return e[i]=t[i]}}(this)),e},s=function(t){var e,i;for(e in t)return i=t[e]}},function(t,e){},function(t,e,i){function n(t){return null==t?void 0===t?u:a:(t=Object(t),c&&c in t?r(t):s(t))}var o=i(2),r=i(8),s=i(9),a="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;t.exports=n},function(t,e){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(e,function(){return this}())},function(t,e,i){function n(t){var e=s.call(t,u),i=t[u];try{t[u]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[u]=i:delete t[u]),o}var o=i(2),r=Object.prototype,s=r.hasOwnProperty,a=r.toString,u=o?o.toStringTag:void 0;t.exports=n},function(t,e){function i(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=i},function(t,e,i){function n(t,e,i){function n(e){var i=b,n=S;return b=S=void 0,x=e,w=t.apply(n,i)}function d(t){return x=t,L=setTimeout(f,e),R?n(t):w}function l(t){var i=t-k,n=t-x,o=e-i;return P?c(o,y-n):o}function h(t){var i=t-k,n=t-x;return void 0===k||i>=e||i<0||P&&n>=y}function f(){var t=r();return h(t)?v(t):void(L=setTimeout(f,l(t)))}function v(t){return L=void 0,V&&b?n(t):(b=S=void 0,w)}function p(){void 0!==L&&clearTimeout(L),x=0,b=k=S=L=void 0}function g(){return void 0===L?w:v(r())}function m(){var t=r(),i=h(t);if(b=arguments,S=this,k=t,i){if(void 0===L)return d(k);if(P)return L=setTimeout(f,e),n(k)}return void 0===L&&(L=setTimeout(f,e)),w}var b,S,y,w,L,k,x=0,R=!1,P=!1,V=!0;if("function"!=typeof t)throw new TypeError(a);return e=s(e)||0,o(i)&&(R=!!i.leading,P="maxWait"in i,y=P?u(s(i.maxWait)||0,e):y,V="trailing"in i?!!i.trailing:V),m.cancel=p,m.flush=g,m}var o=i(1),r=i(13),s=i(15),a="Expected a function",u=Math.max,c=Math.min;t.exports=n},function(t,e){function i(t){return null!=t&&"object"==typeof t}t.exports=i},function(t,e,i){function n(t){return"symbol"==typeof t||r(t)&&o(t)==s}var o=i(6),r=i(11),s="[object Symbol]";t.exports=n},function(t,e,i){var n=i(3),o=function(){return n.Date.now()};t.exports=o},function(t,e,i){function n(t,e,i){var n=!0,a=!0;if("function"!=typeof t)throw new TypeError(s);return r(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),o(t,e,{leading:n,maxWait:e,trailing:a})}var o=i(10),r=i(1),s="Expected a function";t.exports=n},function(t,e,i){function n(t){if("number"==typeof t)return t;if(r(t))return s;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var i=c.test(t);return i||d.test(t)?l(t.slice(2),i?2:8):u.test(t)?s:+t}var o=i(1),r=i(12),s=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;t.exports=n},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"vv-visual",class:t.containerClasses,style:t.containerStyles},[t.aspect?e("div",{staticClass:"vv-aspect-shim",style:{paddingTop:t.aspectPadding}}):t._e(),e("transition",{attrs:{name:t.assetPropVal("poster","transition")}},[t.posterShouldRender?e("div",{staticClass:"vv-transition vv-poster-transition"},[t.background?t.background?e("div",{staticClass:"vv-asset vv-poster",style:t.backgroundStyles("poster")}):t._e():e("img",{staticClass:"vv-asset vv-poster",attrs:{src:t.posterSrc}})]):t._e()]),e("transition",{attrs:{name:t.assetPropVal("image","transition")}},[t.imageShouldRender?e("div",{staticClass:"vv-transition vv-image-transition"},[t.background?t.background?e("div",{staticClass:"vv-asset vv-image",style:t.backgroundStyles("image")}):t._e():e("img",{staticClass:"vv-asset vv-image",attrs:{src:t.imageSrc}})]):t._e()]),e("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.fallbackShouldRender?e("div",{staticClass:"vv-transition vv-fallback-transition"},[t.background?t.background?e("div",{staticClass:"vv-asset vv-fallback",style:t.backgroundStyles("fallback")}):t._e():e("img",{staticClass:"vv-asset vv-fallback",attrs:{src:t.fallbackSrc}})]):t._e()]),e("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.videoShouldRender||t.videoShouldLoad?e("div",{directives:[{name:"show",rawName:"v-show",value:t.videoShouldRender,expression:"videoShouldRender"}],staticClass:"vv-transition vv-video-transition"},[e("video",{ref:"video",staticClass:"vv-asset vv-video",attrs:{controls:t.controls,loop:t.loop,autoplay:t.autoplay,preload:"auto"},domProps:{muted:t.muted}},[t._l(t.videoSources,function(i){return e("source",{key:"url",attrs:{src:i,type:t.mime(i)}})})])]):t._e()])])},staticRenderFns:[]}},function(e,i){e.exports=t},function(t,i){t.exports=e}])});