!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("is-numeric"),require("scrollmonitor"),require("vue")):"function"==typeof define&&define.amd?define(["is-numeric","scrollmonitor","vue"],e):"object"==typeof exports?exports["vue-visual"]=e(require("is-numeric"),require("scrollmonitor"),require("vue")):t["vue-visual"]=e(t["is-numeric"],t.scrollmonitor,t.vue)}(this,function(t,e,i){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var o,n;i(5),o=i(4);var r=i(16);n=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(n=o=o.default),"function"==typeof n&&(n=n.options),n.render=r.render,n.staticRenderFns=r.staticRenderFns,t.exports=o},function(t,e){function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=i},function(t,e,i){var o=i(3),n=o.Symbol;t.exports=n},function(t,e,i){var o=i(7),n="object"==typeof self&&self&&self.Object===Object&&self,r=o||n||Function("return this")();t.exports=r},function(t,e,i){var o,n,r,a,s,d,u,l,c,h,v,f,p;o=i(19),d=i(17),c=i(18),f=i(14),l=[],window.onresize=function(){var t,e,i,o;for(i=[],t=0,e=l.length;t<e;t++)o=l[t],i.push(o.handleWindowResizeThrottled());return i},t.exports={props:{poster:[String,Object],image:[String,Object],video:[String,Object],fallback:[String,Object],width:[String,Number],height:[String,Number],aspect:[String,Number],fill:Boolean,render:String,renderPoster:String,renderImage:String,renderVideo:String,background:{type:String,validator:function(t){return"cover"===t||"contain"===t}},backgroundPosition:{type:String,default:"center center"},align:{type:String,default:"center middle"},load:{type:[String,Boolean],default:!0},loadPoster:{type:[String,Boolean],default:null},loadImage:{type:[String,Boolean],default:null},loadVideo:{type:[String,Boolean],default:null},offset:[Number,String,Object],offsetPoster:[Number,String,Object],offsetImage:[Number,String,Object],offsetVideo:[Number,String,Object],loader:[String,Object],loaderThrottle:{type:Number,default:!0},transition:String,transitionPoster:String,transitionImage:String,transitionVideo:String,transitionLoader:String,autoplay:[String,Boolean],autopause:String,loop:Boolean,muted:Boolean,controls:Boolean,requireAutoplay:Boolean,alt:String},data:function(){return{posterLoading:!1,posterLoaded:!1,imageLoading:!1,imageLoaded:!1,videoLoading:!1,videoLoaded:!1,fallbackLoading:!1,fallbackLoaded:!1,posterInViewport:null,imageInViewport:null,videoInViewport:null,windowWidth:null,containerWidth:null,containerHeight:null,videoNativeWidth:null,videoNativeHeight:null,playing:!1}},mounted:function(){return(this.shouldWatchComponentSize||this.hasResponsiveAsset)&&(l.push(this),this.handleWindowResize(),this.handleWindowResizeThrottled=f(this.handleWindowResize,100)),["poster","image","video","fallback"].forEach(function(t){return function(e){return t.$watch(e+"ShouldLoad",function(i){if(i)return t.loadAsset(e)},{immediate:!0})}}(this)),["poster","image","video"].forEach(function(t){return function(e){return t.$watch(function(){return t.assetScrollId(e)},function(i){return i?t.addScrollListeners(e):t.removeScrollListeners(e)},{immediate:!0})}}(this)),["poster","image","fallback"].forEach(function(t){return function(e){return t.$watch(e+"Src",function(){if(t.resetImgAsset(e),t[e+"ShouldLoad"])return t.loadAsset(e)})}}(this))},destroyed:function(){var t,e,i,o,n,r,a;for(r=["poster","image","video"],e=0,o=r.length;e<o;e++)t=r[e],this.removeScrollListeners(t);for(l.splice(l.indexOf(this),1),a=["poster","image","fallback"],i=0,n=a.length;i<n;i++)t=a[i],this.removeImgAssetLoader(t);return this.removeVideoAssetLoader()},computed:{containerStyles:function(){return{width:h(this.width),height:h(this.height)}},containerClasses:function(){return{"vv-has-width":this.width,"vv-has-height":this.height,"vv-has-aspect":this.aspect,"vv-fill":this.fill,"vv-background-cover":"cover"===this.background,"vv-background-contain":"contain"===this.background,"vv-video-letterbox":"letterbox"===this.videoContainEffect,"vv-video-pillarbox":"pillarbox"===this.videoContainEffect,"vv-align-left":this.align.indexOf("left")!==-1&&this.$slots.default,"vv-align-center":this.align.indexOf("center")!==-1&&this.$slots.default,"vv-align-right":this.align.indexOf("right")!==-1&&this.$slots.default,"vv-align-bottom":this.align.indexOf("bottom")!==-1&&this.$slots.default,"vv-align-middle":this.align.indexOf("middle")!==-1&&this.$slots.default,"vv-align-top":this.align.indexOf("top")!==-1&&this.$slots.default,"vv-loading":this.loadingThrottled,"vv-loaded":this.loadedThrottled,"vv-poster-loading":this.posterLoading,"vv-poster-loaded":this.posterLoaded,"vv-image-loading":this.imageLoading,"vv-image-loaded":this.imageLoaded,"vv-video-loading":this.videoLoading,"vv-video-loaded":this.videoLoaded,"vv-fallback-loading":this.fallbackLoading,"vv-fallback-loaded":this.fallbackLoaded,"vv-poster-in-viewport":this.posterInViewport,"vv-image-in-viewport":this.imageInViewport,"vv-video-in-viewport":this.videoInViewport,"vv-playing":this.playing}},posterSrc:function(){return this.imgSrc("poster")},posterShouldRender:function(){switch(!1){case!(this.imageShouldRender&&this.imageLoaded||this.videoShouldRender&&this.videoLoaded||this.fallbackShouldRender&&this.fallbackLoaded):return!1;default:return this.assetShouldRender("poster")}},posterShouldLoad:function(){return this.assetReadyToLoad("poster")},imageSrc:function(){return this.imgSrc("image")},imageShouldRender:function(){switch(!1){case!(this.videoShouldRender&&this.videoLoaded||this.fallbackShouldRender&&this.fallbackLoaded):return!1;default:return this.assetShouldRender("image")}},imageShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded):return!1;default:return this.assetReadyToLoad("image")}},videoShouldRender:function(){switch(!1){case!this.useFallback:return!1;default:return this.assetShouldRender("video")}},videoShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):return!1;case!this.useFallback:return!1;case!this.playng:return!0;default:return this.assetReadyToLoad("video")}},fallbackSrc:function(){return this.imgSrc("fallback")},fallbackShouldRender:function(){switch(!1){case!!this.useFallback:return!1;default:return this.assetShouldRender("fallback")}},fallbackShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):return!1;case!!this.useFallback:return!1;default:return this.assetReadyToLoad("fallback")}},useFallback:function(){switch(!1){case!!this.fallback:return!1;case!!this.canPlayVideo:return!0;case!(this.requireAutoplay&&!r()):return!0}},loading:function(){return this.posterLoading||this.imageLoading||this.videoLoading||this.fallbackLoading},loaded:function(){return this.posterLoaded||this.imageLoaded||this.videoLoaded||this.fallbackLoaded},loadingThrottled:f(function(){return this.loading},this.loaderThrottle),loadedThrottled:f(function(){return this.loaded},this.loaderThrottle),showLoader:function(){switch(!1){case!!this.loader:return!1;case!this.throttleLoader:return this.loadingThrottled;default:return this.loading}},loaderComponent:function(){switch(typeof this.loader){case"string":return o.component(this.loader);case"object":return this.loader}},canPlayVideo:function(){var t,e,i,o;for(i=this.videoSources,t=0,e=i.length;t<e;t++)if(o=i[t],a(o))return!0;return!1},videoSources:function(){switch(!1){case!!this.video:return[];case"string"!=typeof this.video:return[this.video];case"array"!=typeof this.video:return this.video}},shouldWatchComponentSize:function(){switch(!1){case!this.aspect:return!1;case!(this.video&&this.background):return!0}},hasResponsiveAsset:function(){var t,e,i,o;for(o=["poster","image","fallback"],e=0,i=o.length;e<i;e++)if(t=o[e],"object"==typeof this[t])return!0},containerAspect:function(){switch(!1){case!this.aspect:return this.aspectProp;default:return this.containerWidth/this.containerHeight}},aspectProp:function(){switch(!1){case!!this.aspect:return;case!d(this.aspect):return this.aspect;case!this.aspect.match(":"):return n(this.aspect)}},aspectPadding:function(){if(this.aspectProp)return 1/this.aspectProp*100+"%"},videoNativeAspect:function(){return this.videoNativeWidth/this.videoNativeHeight},videoContainEffect:function(){if(this.videoNativeAspect)return this.containerAspect>this.videoNativeAspect?"pillarbox":"letterbox"}},watch:{playing:function(){return this.$refs.video?this.playing?this.$refs.video.play():this.$refs.video.pause():this.playing=!1},autoplay:function(){return this.respondToAutoplay()},autopause:function(){return this.respondToAutopause()},videoLoaded:function(){return this.respondToAutoplay()},videoInViewport:function(t){return t?this.respondToAutoplay():this.respondToAutopause()}},methods:{assetShouldRender:function(t){var e,i,o;switch(o="load"===this.assetPropVal(t,"render"),i=!!this.assetPropVal(t,"transition"),e=this.assetReadyToLoad(t)!==!0,!1){case!!this[t]:return!1;case!o:return this[t+"Loaded"];case!i:return this[t+"Loaded"];case!e:return this[t+"Loaded"];default:return!0}},backgroundStyles:function(t){return{backgroundImage:"url('"+this[t+"Src"]+"')",backgroundPosition:this.backgroundPosition}},imgSrc:function(t){var e,i,o,n;if(this[t]){if("string"==typeof this[t])return this[t];e=v(this[t]),i=s(e);for(n in e){if(o=e[n],n>=this.windowWidth)return i;i=o}return i}},assetReadyToLoad:function(t){var e,i,o;switch(e=this[t+"Loading"]||this[t+"Loaded"],i=this.assetPropVal(t,"load")===!0,o="visible"===this.assetPropVal(t,"load"),!1){case!e:return!0;case!!this[t]:return!1;case!i:return!0;case!(o&&this[t+"InViewport"]):return!0}},loadAsset:function(t){switch(t){case this[t+"Loaded"]:return!0;case"video":return this.loadVideoAsset();default:return this.loadImgAsset(t)}},loadVideoAsset:function(){return this.videoLoading=!0,this.$refs.video.addEventListener("canplaythrough",this.videoOnCanplaythrough=function(t){return function(){if(t.videoLoading=!1,t.videoLoaded=!0,t.$refs.video)return t.$refs.video.removeEventListener("canplaythrough",t.videoOnCanplaythrough)}}(this)),this.$refs.video.addEventListener("loadedmetadata",this.videoOnLoadedmetadata=function(t){return function(){if(t.videoNativeWidth=t.$refs.video.videoWidth,t.videoNativeHeight=t.$refs.video.videoHeight,t.$refs.video)return t.$refs.video.removeEventListener("loadedmetadata",t.videoOnLoadedmetadata)}}(this)),this.$refs.video.load()},removeVideoAssetLoader:function(t){if(this.$refs.video)return this.videoOnCanplaythrough&&removeEventListener("canplaythrough",this.videoOnCanplaythrough),this.videoOnLoadedmetadata?removeEventListener("loadedmetadata",this.videoOnLoadedmetadata):void 0},loadImgAsset:function(t){return this[t+"Loading"]=!0,this[t+"Loader"]=new Image,this[t+"Loader"].addEventListener("load",this[t+"OnLoad"]=function(e){return function(){return e[t+"Loading"]=!1,e[t+"Loaded"]=!0,e.removeImgAssetLoader(t)}}(this)),this[t+"Loader"].src=this[t+"Src"]},removeImgAssetLoader:function(t){if(this[t+"Loader"]&&this[t+"OnLoad"])return this[t+"Loader"].removeEventListener("load",this[t+"OnLoad"])},resetImgAsset:function(t){return this.removeImgAssetLoader(t),this[t+"Loading"]=!1,this[t+"Loaded"]=!1},assetScrollId:function(t){var e;if(this.assetUsesScroll(t))return e=this.assetPropVal(t,"offset"),JSON.stringify(e)},assetUsesScroll:function(t){switch(!1){case"visible"!==this.assetPropVal(t,"load"):return!0;case!("video"===t&&"visible"===this.autoplay):return!0;case!("video"===t&&"visible"===this.autopause):return!0}},addScrollListeners:function(t){var e;if(this.removeScrollListeners(t),this.$el&&this[t])return e=this.assetPropVal(t,"offset"),"string"==typeof e&&(e=parseInt(e,10)),this[t+"ScrollMonitor"]=c.create(this.$el,e),this[t+"InViewport"]=this[t+"ScrollMonitor"].isInViewport,this[t+"ScrollMonitor"].on("visibilityChange",function(e){return function(){return e[t+"InViewport"]=e[t+"ScrollMonitor"].isInViewport}}(this))},removeScrollListeners:function(t){if(this[t+"ScrollMonitor"])return this[t+"ScrollMonitor"].destroy()},handleWindowResize:function(){if(this.windowWidth=window.innerWidth,this.shouldWatchComponentSize)return this.updateContainerSize()},updateContainerSize:function(){return this.containerWidth=this.$el.offsetWidth,this.containerHeight=this.$el.offsetHeight},play:function(){return this.playing=!0},pause:function(){return this.playing=!1},restart:function(){return this.$refs.video&&(this.$refs.video.currentTime=0),this.play()},togglePlayback:function(t){return null==t&&(t=null),(t=null)?this.togglePlayback(!this.playing):t?this.play():this.pause()},respondToAutoplay:function(){switch(!1){case this.autoplay!==!0:return this.play();case!("visible"===this.autoplay&&this.videoInViewport):return this.play()}},respondToAutopause:function(){switch(!1){case!("visible"===this.autopause&&!this.videoInViewport):return this.pause()}},assetPropVal:function(t,e){var i,o;return i=e+p(t),null!=(o=this[i])?o:this[e]},mime:function(t){return u(t)}},setDefaults:function(t){var e,i,o;i=[];for(e in t)o=t[e],i.push(this.props[e].default=o);return i}},h=function(t){if(t)return d(t)?t+"px":t},n=function(t){var e;return e=t.split(":"),parseInt(e[0],10)/parseInt(e[1],10)},a=function(t){var e;return e=document.createElement("video"),"no"!==(null!=e?e.canPlayType(u(t)):void 0)},u=function(t){var e;switch(null!=(e=t.match(/\.(\w+)/))?e[1]:void 0){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},r=function(){return!navigator.userAgent.match(/Mobile|Android|BlackBerry/i)},p=function(t){return t&&t[0].toUpperCase()+t.slice(1)},v=function(t){var e;return e={},Object.keys(t).sort().forEach(function(i){return function(i){return e[i]=t[i]}}(this)),e},s=function(t){var e,i;for(e in t)return i=t[e]}},function(t,e){},function(t,e,i){function o(t){return null==t?void 0===t?d:s:(t=Object(t),u&&u in t?r(t):a(t))}var n=i(2),r=i(8),a=i(9),s="[object Null]",d="[object Undefined]",u=n?n.toStringTag:void 0;t.exports=o},function(t,e){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(e,function(){return this}())},function(t,e,i){function o(t){var e=a.call(t,d),i=t[d];try{t[d]=void 0;var o=!0}catch(t){}var n=s.call(t);return o&&(e?t[d]=i:delete t[d]),n}var n=i(2),r=Object.prototype,a=r.hasOwnProperty,s=r.toString,d=n?n.toStringTag:void 0;t.exports=o},function(t,e){function i(t){return n.call(t)}var o=Object.prototype,n=o.toString;t.exports=i},function(t,e,i){function o(t,e,i){function o(e){var i=b,o=y;return b=y=void 0,x=e,L=t.apply(o,i)}function l(t){return x=t,w=setTimeout(v,e),O?o(t):L}function c(t){var i=t-k,o=t-x,n=e-i;return V?u(n,S-o):n}function h(t){var i=t-k,o=t-x;return void 0===k||i>=e||i<0||V&&o>=S}function v(){var t=r();return h(t)?f(t):void(w=setTimeout(v,c(t)))}function f(t){return w=void 0,R&&b?o(t):(b=y=void 0,L)}function p(){void 0!==w&&clearTimeout(w),x=0,b=k=y=w=void 0}function g(){return void 0===w?L:f(r())}function m(){var t=r(),i=h(t);if(b=arguments,y=this,k=t,i){if(void 0===w)return l(k);if(V)return w=setTimeout(v,e),o(k)}return void 0===w&&(w=setTimeout(v,e)),L}var b,y,S,L,w,k,x=0,O=!1,V=!1,R=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,n(i)&&(O=!!i.leading,V="maxWait"in i,S=V?d(a(i.maxWait)||0,e):S,R="trailing"in i?!!i.trailing:R),m.cancel=p,m.flush=g,m}var n=i(1),r=i(13),a=i(15),s="Expected a function",d=Math.max,u=Math.min;t.exports=o},function(t,e){function i(t){return null!=t&&"object"==typeof t}t.exports=i},function(t,e,i){function o(t){return"symbol"==typeof t||r(t)&&n(t)==a}var n=i(6),r=i(11),a="[object Symbol]";t.exports=o},function(t,e,i){var o=i(3),n=function(){return o.Date.now()};t.exports=n},function(t,e,i){function o(t,e,i){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return r(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),n(t,e,{leading:o,maxWait:e,trailing:s})}var n=i(10),r=i(1),a="Expected a function";t.exports=o},function(t,e,i){function o(t){if("number"==typeof t)return t;if(r(t))return a;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var i=u.test(t);return i||l.test(t)?c(t.slice(2),i?2:8):d.test(t)?a:+t}var n=i(1),r=i(12),a=NaN,s=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=o},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"vv-visual",class:t.containerClasses,style:t.containerStyles},[t.aspect?e("div",{staticClass:"vv-aspect-shim",style:{paddingTop:t.aspectPadding}}):t._e(),e("div",{staticClass:"vv-slot-prepend"},[t._t("prepend")]),e("transition",{attrs:{name:t.assetPropVal("poster","transition")}},[t.posterShouldRender?e("div",{staticClass:"vv-transition vv-poster-transition"},[t.background?t.background?e("div",{staticClass:"vv-asset vv-poster",style:t.backgroundStyles("poster"),attrs:{"aria-label":t.alt}}):t._e():e("img",{staticClass:"vv-asset vv-poster",attrs:{src:t.posterSrc,alt:t.alt}})]):t._e()]),e("transition",{attrs:{name:t.assetPropVal("image","transition")}},[t.imageShouldRender?e("div",{staticClass:"vv-transition vv-image-transition"},[t.background?t.background?e("div",{staticClass:"vv-asset vv-image",style:t.backgroundStyles("image"),attrs:{"aria-label":t.alt}}):t._e():e("img",{staticClass:"vv-asset vv-image",attrs:{src:t.imageSrc,alt:t.alt}})]):t._e()]),e("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.fallbackShouldRender?e("div",{staticClass:"vv-transition vv-fallback-transition"},[t.background?t.background?e("div",{staticClass:"vv-asset vv-fallback",style:t.backgroundStyles("fallback"),attrs:{"aria-label":t.alt}}):t._e():e("img",{staticClass:"vv-asset vv-fallback",attrs:{src:t.fallbackSrc,alt:t.alt}})]):t._e()]),e("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.videoShouldLoad?e("div",{directives:[{name:"show",rawName:"v-show",value:t.videoShouldRender,expression:"videoShouldRender"}],staticClass:"vv-transition vv-video-transition"},[e("video",{ref:"video",staticClass:"vv-asset vv-video",attrs:{controls:t.controls,loop:t.loop,preload:"auto","aria-label":t.alt},domProps:{muted:t.muted}},[t._l(t.videoSources,function(i){return e("source",{key:"url",attrs:{src:i,type:t.mime(i)}})})])]):t._e()]),e("div",{staticClass:"vv-slot"},[t._t("default")]),e("transition",{attrs:{name:t.assetPropVal("loader","transition")}},[t.showLoader?e(t.loaderComponent,{tag:"component",staticClass:"vv-loader"}):t._e()])])},staticRenderFns:[]}},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i}])});