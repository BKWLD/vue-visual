!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("is-numeric"),require("lodash/throttle"),require("lodash/pickBy"),require("scrollmonitor"),require("vue"));else if("function"==typeof define&&define.amd)define(["is-numeric","lodash/throttle","lodash/pickBy","scrollmonitor","vue"],e);else{var i="object"==typeof exports?e(require("is-numeric"),require("lodash/throttle"),require("lodash/pickBy"),require("scrollmonitor"),require("vue")):e(t["is-numeric"],t["lodash/throttle"],t["lodash/pickBy"],t.scrollmonitor,t.vue);for(var o in i)("object"==typeof exports?exports:t)[o]=i[o]}}(this,function(t,e,i,o,n){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){i(15);var o=i(16)(i(3),i(17),null,null);t.exports=o.exports},function(t,e){t.exports=require("is-numeric")},function(t,e){t.exports=require("lodash/throttle")},function(t,e,i){var o;o=i(12),t.exports={name:"VueVisual",mixins:[i(4),i(5),i(6),i(7),i(8),i(9),i(13),i(14)],methods:{assetPropVal:function(t,e){var i,n;return"fallback"!==t||"load"!==e&&"offset"!==e&&"transition"!==e||(t="video"),i=e+o(t),null!=(n=this[i])?n:this[e]}},setDefaults:function(t){var e,i,o;i=[];for(e in t)o=t[e],i.push(this.props[e].default=o);return i}}},function(t,e){t.exports={props:{alt:String}}},function(t,e,i){var o;o=i(11),t.exports={props:{poster:[String,Object],image:[String,Object],video:[String,Object],fallback:[String,Object],posterFromImage:{type:Boolean,default:!1},requireAutoplay:{type:Boolean,default:!0},assetMutator:Function},mounted:function(){return["poster","image","fallback"].forEach(function(t){return function(e){return t.$watch(e+"Src",function(){if(t.resetImgAsset(e),t[e+"ShouldLoad"])return t.loadAsset(e)})}}(this))},computed:{posterSrc:function(){return this.imgSrc("poster")},imageSrc:function(){return this.imgSrc("image")},fallbackSrc:function(){return this.imgSrc("fallback")},videoSrc:function(){return this.applyAssetMutation("video",this.video)},useFallback:function(){switch(!1){case!!this.canPlayVideo:return!0;case!(this.requireAutoplay&&!this.canAutoplayVideo):return!0}}},methods:{imgSrc:function(t){var e,i,n,s,r;if(s=this.applyAssetMutation(t,this[t]),"poster"===t&&this.posterFromImage&&"object"==typeof s)return n=o(s),n[Object.keys(n)[0]];if(s){if("string"==typeof s)return s;e=o(s);for(r in e)if(s=e[r],i=s,r>=this.containerWidth)return i;return i}},applyAssetMutation:function(t,e){return this.assetMutator?this.assetMutator(t,e,this):e}}}},function(t,e,i){var o,n,s;o=i(21),s=i(2),n=function(t){return t===!1||t===!0||"visible"===t},t.exports={props:{load:{type:[String,Boolean],default:!0,validator:n},loadPoster:{type:[String,Boolean],default:null,validator:n},loadImage:{type:[String,Boolean],default:null,validator:n},loadVideo:{type:[String,Boolean],default:null,validator:n},loader:[String,Object],loaderThrottle:{type:Number,default:100}},data:function(){return{posterLoading:!1,posterLoaded:!1,imageLoading:!1,imageLoaded:!1,videoLoading:!1,videoLoaded:!1,fallbackLoading:!1,fallbackLoaded:!1}},mounted:function(){return["poster","image","video","fallback"].forEach(function(t){return function(e){return t.$watch(e+"ShouldLoad",function(i){if(i)return t.loadAsset(e)},{immediate:!0})}}(this))},destroyed:function(){var t,e,i,o;for(o=["poster","image","fallback"],e=0,i=o.length;e<i;e++)t=o[e],this.removeImgAssetLoader(t);return this.removeVideoAssetLoader()},computed:{posterShouldLoad:function(){return this.assetReadyToLoad("poster")},imageShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded):return!1;default:return this.assetReadyToLoad("image")}},videoShouldLoad:function(){switch(!1){case!(this.videoLoading||this.videoLoaded):return!0;case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):return!1;case!this.useFallback:return!1;case!this.playng:return!0;default:return this.assetReadyToLoad("video")}},fallbackShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):return!1;case!!this.useFallback:return!1;default:return this.assetReadyToLoad("fallback")}},loading:function(){return this.posterLoading||this.imageLoading||this.videoLoading||this.fallbackLoading},loaded:function(){return this.posterLoaded||this.imageLoaded||this.videoLoaded||this.fallbackLoaded},loadingThrottled:s(function(){return this.loading},this.loaderThrottle),loadedThrottled:s(function(){return this.loaded},this.loaderThrottle),showLoader:function(){switch(!1){case!!this.loader:return!1;case!this.throttleLoader:return this.loadingThrottled;default:return this.loading}},loaderComponent:function(){switch(typeof this.loader){case"string":return o.component(this.loader);case"object":return this.loader}}},watch:{loading:function(t){if(t)return this.$emit("loading")},loaded:function(t){if(t)return this.$emit("loaded")},posterLoading:function(t){if(t)return this.$emit("poster-loading")},posterLoaded:function(t){if(t)return this.$emit("poster-loaded")},imageLoading:function(t){if(t)return this.$emit("image-loading")},imageLoaded:function(t){if(t)return this.$emit("image-loaded")},videoLoading:function(t){if(t)return this.$emit("video-loading")},videoLoaded:function(t){if(t)return this.$emit("video-loaded")},fallbackLoading:function(t){if(t)return this.$emit("fallback-loading")},fallbackLoaded:function(t){if(t)return this.$emit("fallback-loaded")}},methods:{assetReadyToLoad:function(t){var e,i,o;switch(e=this[t+"Loading"]||this[t+"Loaded"],i=this.assetPropVal(t,"load")===!0,o="visible"===this.assetPropVal(t,"load"),!1){case!e:return!0;case!!this[t+"Src"]:return!1;case!i:return!0;case!(o&&this[this.inViewportProp(t)]):return!0}},inViewportProp:function(t){switch(t){case"fallback":return"videoInViewport";default:return t+"InViewport"}},loadAsset:function(t){switch(t){case this[t+"Loaded"]:return!0;case"video":return this.loadVideoAsset();default:return this.loadImgAsset(t)}},loadImgAsset:function(t){return this[t+"Loading"]=!0,this[t+"Loader"]=new Image,this[t+"Loader"].addEventListener("load",this[t+"OnLoad"]=function(e){return function(){return e[t+"Loading"]=!1,e[t+"Loaded"]=!0,e.removeImgAssetLoader(t)}}(this)),this[t+"Loader"].src=this[t+"Src"]},removeImgAssetLoader:function(t){if(this[t+"Loader"]&&this[t+"OnLoad"])return this[t+"Loader"].removeEventListener("load",this[t+"OnLoad"])},resetImgAsset:function(t){return this.removeImgAssetLoader(t),this[t+"Loading"]=!1,this[t+"Loaded"]=!1},loadVideoAsset:function(){return this.videoLoading=!0,this.$refs.video.addEventListener("canplaythrough",this.videoOnCanplaythrough=function(t){return function(){if(t.videoLoading=!1,t.videoLoaded=!0,t.$refs.video)return t.$refs.video.removeEventListener("canplaythrough",t.videoOnCanplaythrough)}}(this)),this.$refs.video.addEventListener("loadedmetadata",this.videoOnLoadedmetadata=function(t){return function(){if(t.videoNativeWidth=t.$refs.video.videoWidth,t.videoNativeHeight=t.$refs.video.videoHeight,t.$refs.video)return t.$refs.video.removeEventListener("loadedmetadata",t.videoOnLoadedmetadata)}}(this)),this.$refs.video.load()},removeVideoAssetLoader:function(t){if(this.$refs.video)return this.videoOnCanplaythrough&&removeEventListener("canplaythrough",this.videoOnCanplaythrough),this.videoOnLoadedmetadata?removeEventListener("loadedmetadata",this.videoOnLoadedmetadata):void 0}}}},function(t,e,i){var o,n;n=i(1),o=function(t){var e;return e=t.split(":"),parseInt(e[0],10)/parseInt(e[1],10)},t.exports={props:{width:[String,Number],height:[String,Number],aspect:[String,Number],fill:Boolean},data:function(){return{watchSize:!1}},computed:{shouldWatchComponentSize:function(){switch(!1){case!this.watchSize:return!0;case!this.hasResponsiveAsset:return!0;case!this.aspect:return!1;case!(this.video&&this.background):return!0}},hasResponsiveAsset:function(){var t,e,i,o;for(o=["poster","image","fallback"],e=0,i=o.length;e<i;e++)if(t=o[e],"object"==typeof this[t])return!0},containerAspect:function(){switch(!1){case!this.aspect:return this.aspectProp;default:return this.containerWidth/this.containerHeight}},aspectProp:function(){switch(!1){case!!this.aspect:return;case!n(this.aspect):return this.aspect;case!this.aspect.match(":"):return o(this.aspect)}},aspectPadding:function(){if(this.aspectProp)return 1/this.aspectProp*100+"%"}}}},function(t,e,i){var o,n,s;o=i(1),n=i(19),s=function(t){if(t)return o(t)?t+"px":t},t.exports={props:{align:{type:String,default:"center middle"},background:{type:String,validator:function(t){return"cover"===t||"contain"===t||""===t}},backgroundPosition:{type:String,default:"center center"}},computed:{containerStyles:function(){return n({width:s(this.width),height:s(this.height)},function(t){return!!t})},containerClasses:function(){return{"vv-block":this.displayBlock,"vv-fill":this.fill,"vv-loading":this.loadingThrottled,"vv-loaded":this.loadedThrottled,"vv-poster-loading":this.posterLoading,"vv-poster-loaded":this.posterLoaded,"vv-image-loading":this.imageLoading,"vv-image-loaded":this.imageLoaded,"vv-video-loading":this.videoLoading,"vv-video-loaded":this.videoLoaded,"vv-fallback-loading":this.fallbackLoading,"vv-fallback-loaded":this.fallbackLoaded,"vv-playing":this.playing,"vv-align-left":this.align.indexOf("left")!==-1&&this.filledSlot,"vv-align-center":this.align.indexOf("center")!==-1&&this.filledSlot,"vv-align-right":this.align.indexOf("right")!==-1&&this.filledSlot}},assetClasses:function(){return{"vv-has-width":this.width,"vv-has-height":this.height,"vv-fill-asset":this.shouldFill,"vv-background-cover":"cover"===this.background,"vv-background-contain":"contain"===this.background,"vv-video-letterbox":"letterbox"===this.videoContainEffect,"vv-video-pillarbox":"pillarbox"===this.videoContainEffect}},transitionClasses:function(){return{"vv-fill":this.shouldFill}},slotClasses:function(){return{"vv-align-bottom":this.align.indexOf("bottom")!==-1&&this.filledSlot,"vv-align-middle":this.align.indexOf("middle")!==-1&&this.filledSlot,"vv-align-top":this.align.indexOf("top")!==-1&&this.filledSlot}},shimClasses:function(){return{"vv-align-bottom":this.align.indexOf("bottom")!==-1&&this.filledSlot,"vv-align-middle":this.align.indexOf("middle")!==-1&&this.filledSlot,"vv-align-top":this.align.indexOf("top")!==-1&&this.filledSlot}},displayBlock:function(){return this.aspect||this.background},shouldFill:function(){return this.fill||this.aspect||this.background},showShim:function(){switch(!1){case!this.aspect:return!0;case!(this.filledSlot&&this.hasVerticalAlign):return!0}},filledSlot:function(){return!!this.$slots.default},hasVerticalAlign:function(){return this.align.indexOf("bottom")||this.align.indexOf("middle")||this.align.indexOf("top")}},methods:{backgroundStyles:function(t){return{backgroundImage:"url('"+this[t+"Src"]+"')",backgroundPosition:this.backgroundPosition}}}}},function(t,e){t.exports={props:{transition:String,transitionPoster:String,transitionImage:String,transitionVideo:String,transitionLoader:String},computed:{posterShouldRender:function(){switch(!1){case!(this.imageShouldRender&&this.imageLoaded||this.videoShouldRender&&this.videoLoaded||this.fallbackShouldRender&&this.fallbackLoaded):return!1;default:return this.assetShouldRender("poster")}},imageShouldRender:function(){switch(!1){case!(this.videoShouldRender&&this.videoLoaded||this.fallbackShouldRender&&this.fallbackLoaded):return!1;default:return this.assetShouldRender("image")}},videoShouldRender:function(){switch(!1){case!this.useFallback:return!1;default:return this.assetShouldRender("video")}},fallbackShouldRender:function(){switch(!1){case!!this.useFallback:return!1;default:return this.assetShouldRender("fallback")}}},methods:{assetShouldRender:function(t){var e,i;switch(i=!!this.assetPropVal(t,"transition"),e=this.assetReadyToLoad(t)!==!0,!1){case!!this[t]:return!1;case!i:return this[t+"Loaded"];case!e:return this[t+"Loaded"];default:return!0}}}}},function(t,e){t.exports=function(t){var e;if(t(),"loading"===("undefined"!=typeof document&&null!==document?document.readyState:void 0))return document.addEventListener("readystatechange",e=function(){if(t(),"complete"===document.readyState)return document.removeEventListener("readystatechange",e)})}},function(t,e){t.exports=function(t){var e;return e={},Object.keys(t).sort().forEach(function(i){return function(i){return e[i]=t[i]}}(this)),e}},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e){var i,o;i=function(t){var e;return e="undefined"!=typeof document&&null!==document?document.createElement("video"):void 0,"no"!==(null!=e?e.canPlayType(o(t)):void 0)},o=function(t){var e;switch(null!=(e=t.match(/\.(\w+)/))?e[1]:void 0){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},t.exports={props:{autoplay:[String,Boolean],autopause:String,loop:Boolean,muted:Boolean,controls:Boolean},data:function(){return{videoNativeWidth:null,videoNativeHeight:null,playing:!1}},computed:{canPlayVideo:function(){var t,e,o,n;if(!this.video)return!1;for(o=this.videoSources,t=0,e=o.length;t<e;t++)if(n=o[t],i(n))return!0;return!1},canAutoplayVideo:function(){switch(!1){case!("undefined"!=typeof navigator&&null!==navigator?navigator.userAgent.match(/BlackBerry/i):void 0):return!1;case!(("undefined"!=typeof navigator&&null!==navigator?navigator.userAgent.match(/(iPhone|iPod)/gi):void 0)&&!("playsInline"in document.createElement("video"))):return!1;default:return!0}},videoSources:function(){switch(!1){case"string"!=typeof this.video:return[this.video];case"array"!=typeof this.video:return this.video}},videoNativeAspect:function(){return this.videoNativeWidth/this.videoNativeHeight},videoContainEffect:function(){if(this.videoNativeAspect)return this.containerAspect>this.videoNativeAspect?"pillarbox":"letterbox"}},watch:{playing:function(){return this.$refs.video?this.playing?this.$refs.video.play():this.$refs.video.pause():this.playing=!1},autoplay:function(){return this.respondToAutoplay()},autopause:function(){return this.respondToAutopause()},videoLoaded:function(){return this.respondToAutoplay()},videoInViewport:function(t){return t?this.respondToAutoplay():this.respondToAutopause()}},methods:{play:function(){return this.playing=!0},pause:function(){return this.playing=!1},restart:function(){return this.$refs.video&&(this.$refs.video.currentTime=0),this.play()},togglePlayback:function(t){return null==t&&(t=null),(t=null)?this.togglePlayback(!this.playing):t?this.play():this.pause()},respondToAutoplay:function(){var t;switch(!1){case(t=this.autoplay)!==!0&&""!==t:return this.play();case!("visible"===this.autoplay&&this.videoInViewport):return this.play()}},respondToAutopause:function(){switch(!1){case!("visible"===this.autopause&&!this.videoInViewport):return this.pause()}},mime:function(t){return o(t)}}}},function(t,e,i){var o,n,s,r,a;r=i(20),a=i(2),o=i(10),i(18),s=[],n=function(){var t,e,i,o;for(i=[],t=0,e=s.length;t<e;t++)o=s[t],i.push(o.handleWindowResizeThrottled());return i},"undefined"!=typeof window&&null!==window&&window.addEventListener("resize",function(){return n()}),o(n),t.exports={props:{offset:{type:[Number,String,Object],default:0},offsetPoster:[Number,String,Object],offsetImage:[Number,String,Object],offsetVideo:[Number,String,Object]},data:function(){return{windowWidth:null,containerWidth:null,containerHeight:null,posterInViewport:null,imageInViewport:null,videoInViewport:null}},mounted:function(){return this.shouldWatchComponentSize&&(s.push(this),this.handleWindowResize(),this.handleWindowResizeThrottled=a(this.handleWindowResize,100)),["poster","image","video"].forEach(function(t){return function(e){return t.$watch(function(){return t.assetScrollId(e)},function(i){return i?t.addScrollListeners(e):t.removeScrollListeners(e)},{immediate:!0})}}(this))},destroyed:function(){var t,e,i,o;for(o=["poster","image","video"],e=0,i=o.length;e<i;e++)t=o[e],this.removeScrollListeners(t);return s.splice(s.indexOf(this),1)},methods:{assetScrollId:function(t){var e;if(this.assetUsesScroll(t))return e=this.assetPropVal(t,"offset"),JSON.stringify(e)},assetUsesScroll:function(t){switch(!1){case!!this[t]:return!1;case"visible"!==this.assetPropVal(t,"load"):return!0;case!("video"===t&&"visible"===this.autoplay):return!0;case!("video"===t&&"visible"===this.autopause):return!0}},addScrollListeners:function(t){var e;if(this.removeScrollListeners(t),this.$el&&this[t])return e=this.assetPropVal(t,"offset"),"string"==typeof e&&(e=parseInt(e,10)),this[t+"ScrollMonitor"]=r.create(this.$el,e),this[t+"ScrollMonitor"].on("stateChange",function(e){return function(){return e.updateInViewport(t)}}(this)),o(function(e){return function(){return window.dispatchEvent(new CustomEvent("scroll")),e.updateInViewport(t)}}(this))},updateInViewport:function(t){if(this[t+"ScrollMonitor"])return this[t+"InViewport"]=this[t+"ScrollMonitor"].isInViewport,this.canRemoveScrollListeners(t)?this.removeScrollListeners(t):void 0},canRemoveScrollListeners:function(t){return!(!this[t+"InViewport"]||(t="video")&&"visible"!==this.autoplay&&"visible"!==this.autopause)},removeScrollListeners:function(t){if(this[t+"ScrollMonitor"])return this[t+"ScrollMonitor"].destroy(),delete this[t+"ScrollMonitor"]},handleWindowResize:function(){if(this.windowWidth=window.innerWidth,this.shouldWatchComponentSize)return this.updateContainerSize()},updateContainerSize:function(){if(this.containerWidth=this.$el.offsetWidth,this.video||this.watchSize)return this.containerHeight=this.$el.offsetHeight}}}},function(t,e){},function(t,e){t.exports=function(t,e,i,o){var n,s=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(n=t,s=t.default);var a="function"==typeof s?s.options:s;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),i&&(a._scopeId=i),o){var d=a.computed||(a.computed={});Object.keys(o).forEach(function(t){var e=o[t];d[t]=function(){return e}})}return{esModule:n,exports:s,options:a}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vv-visual",class:t.containerClasses,style:t.containerStyles},[t.showShim?i("div",{staticClass:"vv-shim",class:t.shimClasses,style:{paddingTop:t.aspectPadding}}):t._e(),t.$slots.prepend?i("div",{staticClass:"vv-slot-prepend"},[t._t("prepend")],2):t._e(),i("transition",{attrs:{name:t.assetPropVal("poster","transition")}},[t.posterShouldRender?i("div",{staticClass:"vv-transition vv-poster-transition",class:t.transitionClasses},[t.background?t.background?i("div",{staticClass:"vv-asset vv-poster",class:t.assetClasses,style:t.backgroundStyles("poster"),attrs:{"aria-label":t.alt}}):t._e():i("img",{staticClass:"vv-asset vv-poster",class:t.assetClasses,attrs:{src:t.posterSrc,alt:t.alt}})]):t._e()]),i("transition",{attrs:{name:t.assetPropVal("image","transition")}},[t.imageShouldRender?i("div",{staticClass:"vv-transition vv-image-transition",class:t.transitionClasses},[t.background?t.background?i("div",{staticClass:"vv-asset vv-image",class:t.assetClasses,style:t.backgroundStyles("image"),attrs:{"aria-label":t.alt}}):t._e():i("img",{staticClass:"vv-asset vv-image",class:t.assetClasses,attrs:{src:t.imageSrc,alt:t.alt}})]):t._e()]),i("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.fallbackShouldRender?i("div",{staticClass:"vv-transition vv-fallback-transition",class:t.transitionClasses},[t.background?t.background?i("div",{staticClass:"vv-asset vv-fallback",class:t.assetClasses,style:t.backgroundStyles("fallback"),attrs:{"aria-label":t.alt}}):t._e():i("img",{staticClass:"vv-asset vv-fallback",class:t.assetClasses,attrs:{src:t.fallbackSrc,alt:t.alt}})]):t._e()]),i("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.videoShouldLoad?i("div",{directives:[{name:"show",rawName:"v-show",value:t.videoShouldRender,expression:"videoShouldRender"}],staticClass:"vv-transition vv-video-transition",class:t.transitionClasses},[i("video",{ref:"video",staticClass:"vv-asset vv-video",class:t.assetClasses,attrs:{controls:t.controls,loop:t.loop,playsinline:"playsinline",preload:"auto","aria-label":t.alt},domProps:{muted:t.muted}},t._l(t.videoSources,function(e){return i("source",{key:"url",attrs:{src:e,type:t.mime(e)}})}))]):t._e()]),t.filledSlot?i("div",{staticClass:"vv-slot",class:t.slotClasses},[t._t("default")],2):t._e(),i("transition",{attrs:{name:t.assetPropVal("loader","transition")}},[t.showLoader?i(t.loaderComponent,{tag:"component",staticClass:"vv-loader"}):t._e()],1)],1)},staticRenderFns:[]}},function(t,e){!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}return"undefined"!=typeof window&&"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}()},function(t,e){t.exports=require("lodash/pickBy")},function(t,e){t.exports=require("scrollmonitor")},function(t,e){t.exports=require("vue")}])});