module.exports=function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e){t.exports=require("lodash/throttle")},function(t,e){t.exports=require("is-numeric")},function(t,e){t.exports=require("vue")},function(t,e){t.exports=require("lodash/pickBy")},function(t,e){t.exports=require("scrollmonitor")},function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vv-visual",class:t.containerClasses,style:t.containerStyles},[t.showShim?i("div",{staticClass:"vv-shim",class:t.shimClasses,style:{paddingTop:t.aspectPadding}}):t._e(),t.$slots.prepend?i("div",{staticClass:"vv-slot-prepend"},[t._t("prepend")],2):t._e(),i("transition",{attrs:{name:t.assetPropVal("poster","transition")}},[t.posterShouldRender?i("div",{staticClass:"vv-transition vv-poster-transition",class:t.transitionClasses},[t.background?t.background?i("div",{staticClass:"vv-asset vv-poster",class:t.assetClasses,style:t.backgroundStyles("poster"),attrs:{"aria-label":t.alt}}):t._e():i("img",{staticClass:"vv-asset vv-poster",class:t.assetClasses,attrs:{src:t.posterSrc,alt:t.alt}})]):t._e()]),i("transition",{attrs:{name:t.assetPropVal("image","transition")}},[t.imageShouldRender?i("div",{staticClass:"vv-transition vv-image-transition",class:t.transitionClasses},[t.background?t.background?i("div",{staticClass:"vv-asset vv-image",class:t.assetClasses,style:t.backgroundStyles("image"),attrs:{"aria-label":t.alt}}):t._e():i("img",{staticClass:"vv-asset vv-image",class:t.assetClasses,attrs:{src:t.imageSrc,alt:t.alt}})]):t._e()]),i("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.fallbackShouldRender?i("div",{staticClass:"vv-transition vv-fallback-transition",class:t.transitionClasses},[t.background?t.background?i("div",{staticClass:"vv-asset vv-fallback",class:t.assetClasses,style:t.backgroundStyles("fallback"),attrs:{"aria-label":t.alt}}):t._e():i("img",{staticClass:"vv-asset vv-fallback",class:t.assetClasses,attrs:{src:t.fallbackSrc,alt:t.alt}})]):t._e()]),i("transition",{attrs:{name:t.assetPropVal("video","transition")}},[t.videoShouldLoad?i("div",{directives:[{name:"show",rawName:"v-show",value:t.videoShouldRender,expression:"videoShouldRender"}],staticClass:"vv-transition vv-video-transition",class:t.transitionClasses},[i("video",{ref:"video",staticClass:"vv-asset vv-video",class:t.assetClasses,attrs:{controls:t.controls,loop:t.loop,playsinline:"",preload:"auto","aria-label":t.alt},domProps:{muted:t.muted}},t._l(t.videoSources,function(e){return i("source",{key:"url",attrs:{src:e,type:t.mime(e)}})}),0)]):t._e()]),t.filledSlot?i("div",{staticClass:"vv-slot",class:t.slotClasses},[t._t("default")],2):t._e(),i("transition",{attrs:{name:t.assetPropVal("loader","transition")}},[t.showLoader?i(t.loaderComponent,{tag:"component",staticClass:"vv-loader"}):t._e()],1)],1)};o._withStripped=!0;var n={props:{alt:String}},s=function(t){var e;return e={},Object.keys(t).sort().forEach(function(i){return e[i]=t[i]}),e};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,d={props:{poster:[String,Object],image:[String,Object],video:[String,Object],fallback:[String,Object],posterFromImage:{type:Boolean,default:!1},requireAutoplay:{type:Boolean,default:!0},assetMutator:Function},mounted:function(){var t=this;return["poster","image","fallback"].forEach(function(e){return t.$watch(e+"Src",function(){if(t.resetImgAsset(e),t[e+"ShouldLoad"])return t.loadAsset(e)})})},computed:{posterSrc:function(){return this.imgSrc("poster")},imageSrc:function(){return this.imgSrc("image")},fallbackSrc:function(){return this.imgSrc("fallback")},videoSrc:function(){return this.applyAssetMutation("video",this.video)},useFallback:function(){switch(!1){case!!this.canPlayVideo:case!(this.requireAutoplay&&!this.canAutoplayVideo):return!0}}},methods:{imgSrc:function(t){var e,i,o,n,r;if(n=this.applyAssetMutation(t,this[t]),"poster"===t&&this.posterFromImage&&"object"===a(n))return(o=s(n))[Object.keys(o)[0]];if(n){if("string"==typeof n)return n;for(r in e=s(n))if(i=n=e[r],r>=this.containerWidth)return i;return i}},applyAssetMutation:function(t,e){return this.assetMutator?this.assetMutator(t,e,this):e}}},l=i(2),u=i.n(l),c=i(0),h=i.n(c);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r=function(t){return!1===t||!0===t||"visible"===t};var v,p={props:{load:{type:[String,Boolean],default:!0,validator:r},loadPoster:{type:[String,Boolean],default:null,validator:r},loadImage:{type:[String,Boolean],default:null,validator:r},loadVideo:{type:[String,Boolean],default:null,validator:r},loader:[String,Object],loaderThrottle:{type:Number,default:100}},data:function(){return{posterLoading:!1,posterLoaded:!1,imageLoading:!1,imageLoaded:!1,videoLoading:!1,videoLoaded:!1,fallbackLoading:!1,fallbackLoaded:!1,loadingThrottled:!1,loadedThrottled:!1}},mounted:function(){var t=this;return["poster","image","video","fallback"].forEach(function(e){return t.$watch(e+"ShouldLoad",function(i){if(i)return t.loadAsset(e)},{immediate:!0})})},destroyed:function(){var t,e,i,o;for(e=0,i=(o=["poster","image","fallback"]).length;e<i;e++)t=o[e],this.removeImgAssetLoader(t);return this.removeVideoAssetLoader()},computed:{posterShouldLoad:function(){return this.assetReadyToLoad("poster")},imageShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded):return!1;default:return this.assetReadyToLoad("image")}},videoShouldLoad:function(){switch(!1){case!(this.videoLoading||this.videoLoaded):return!0;case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):case!this.useFallback:return!1;case!this.playng:return!0;default:return this.assetReadyToLoad("video")}},fallbackShouldLoad:function(){switch(!1){case!(this.poster&&!this.posterLoaded||this.image&&!this.imageLoaded):case!!this.useFallback:return!1;default:return this.assetReadyToLoad("fallback")}},loading:function(){return this.posterLoading||this.imageLoading||this.videoLoading||this.fallbackLoading},loaded:function(){return this.posterLoaded||this.imageLoaded||this.videoLoaded||this.fallbackLoaded},showLoader:function(){switch(!1){case!!this.loader:return!1;case!this.throttleLoader:return this.loadingThrottled;default:return this.loading}},loaderComponent:function(){switch(f(this.loader)){case"string":return u.a.component(this.loader);case"object":return this.loader}}},watch:{loaderThrottle:{immediate:!0,handler:function(t){var e=this;return this.getLoadingThrottled=h()(function(){return e.loading},t),this.getLoadedThrottled=h()(function(){return e.loaded},t)}},loading:function(t){return t&&this.$emit("loading"),this.loadingThrottled=this.getLoadingThrottled()},loaded:function(t){return t&&this.$emit("loaded"),this.loadedThrottled=this.getLoadedThrottled()},posterLoading:function(t){if(t)return this.$emit("poster-loading")},posterLoaded:function(t){if(t)return this.$emit("poster-loaded")},imageLoading:function(t){if(t)return this.$emit("image-loading")},imageLoaded:function(t){if(t)return this.$emit("image-loaded")},videoLoading:function(t){if(t)return this.$emit("video-loading")},videoLoaded:function(t){if(t)return this.$emit("video-loaded")},fallbackLoading:function(t){if(t)return this.$emit("fallback-loading")},fallbackLoaded:function(t){if(t)return this.$emit("fallback-loaded")}},methods:{assetReadyToLoad:function(t){var e,i,o;switch(e=this[t+"Loading"]||this[t+"Loaded"],i=!0===this.assetPropVal(t,"load"),o="visible"===this.assetPropVal(t,"load"),!1){case!e:return!0;case!!this[t+"Src"]:return!1;case!i:case!(o&&this[this.inViewportProp(t)]):return!0}},inViewportProp:function(t){switch(t){case"fallback":return"videoInViewport";default:return t+"InViewport"}},loadAsset:function(t){switch(t){case this[t+"Loaded"]:return!0;case"video":return this.loadVideoAsset();default:return this.loadImgAsset(t)}},loadImgAsset:function(t){var e=this;return this[t+"Loading"]=!0,this[t+"Loader"]=new Image,this[t+"Loader"].addEventListener("load",this[t+"OnLoad"]=function(){return e[t+"Loading"]=!1,e[t+"Loaded"]=!0,e.removeImgAssetLoader(t)}),this[t+"Loader"].src=this[t+"Src"]},removeImgAssetLoader:function(t){if(this[t+"Loader"]&&this[t+"OnLoad"])return this[t+"Loader"].removeEventListener("load",this[t+"OnLoad"])},resetImgAsset:function(t){return this.removeImgAssetLoader(t),this[t+"Loading"]=!1,this[t+"Loaded"]=!1},loadVideoAsset:function(){var t=this;return this.videoLoading=!0,this.$refs.video.addEventListener("canplaythrough",this.videoOnCanplaythrough=function(){if(t.videoLoading=!1,t.videoLoaded=!0,t.$refs.video)return t.$refs.video.removeEventListener("canplaythrough",t.videoOnCanplaythrough)}),this.$refs.video.addEventListener("loadedmetadata",this.videoOnLoadedmetadata=function(){if(t.videoNativeWidth=t.$refs.video.videoWidth,t.videoNativeHeight=t.$refs.video.videoHeight,t.$refs.video)return t.$refs.video.removeEventListener("loadedmetadata",t.videoOnLoadedmetadata)}),this.$refs.video.load()},removeVideoAssetLoader:function(t){if(this.$refs.video)return this.videoOnCanplaythrough&&removeEventListener("canplaythrough",this.videoOnCanplaythrough),this.videoOnLoadedmetadata?removeEventListener("loadedmetadata",this.videoOnLoadedmetadata):void 0}}},g=i(1),m=i.n(g);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}v=function(t){var e;return e=t.split(":"),parseInt(e[0],10)/parseInt(e[1],10)};var b,S={props:{width:[String,Number],height:[String,Number],aspect:[String,Number],fill:Boolean},data:function(){return{watchSize:!1}},computed:{shouldWatchComponentSize:function(){switch(!1){case!this.watchSize:case!this.hasResponsiveAsset:return!0;case!this.aspect:return!1;case!(this.video&&this.background):return!0}},hasResponsiveAsset:function(){var t,e,i;for(t=0,e=(i=["poster","image","fallback"]).length;t<e;t++)if("object"===y(this[i[t]]))return!0},containerAspect:function(){switch(!1){case!this.aspect:return this.aspectProp;default:return this.containerWidth/this.containerHeight}},aspectProp:function(){switch(!1){case!!this.aspect:return;case!m()(this.aspect):return this.aspect;case!this.aspect.match(":"):return v(this.aspect)}},aspectPadding:function(){if(this.aspectProp)return 1/this.aspectProp*100+"%"}}},L=i(3),w=i.n(L);b=function(t){if(t)return m()(t)?t+"px":t};var k,C,O={props:{align:{type:String,default:"center middle"},background:{type:String,validator:function(t){return"cover"===t||"contain"===t||""===t}},backgroundPosition:{type:String,default:"center center"}},computed:{containerStyles:function(){return w()({width:b(this.width),height:b(this.height)},function(t){return!!t})},containerClasses:function(){return{"vv-block":this.displayBlock,"vv-fill":this.fill,"vv-loading":this.loadingThrottled,"vv-loaded":this.loadedThrottled,"vv-poster-loading":this.posterLoading,"vv-poster-loaded":this.posterLoaded,"vv-image-loading":this.imageLoading,"vv-image-loaded":this.imageLoaded,"vv-video-loading":this.videoLoading,"vv-video-loaded":this.videoLoaded,"vv-fallback-loading":this.fallbackLoading,"vv-fallback-loaded":this.fallbackLoaded,"vv-playing":this.playing,"vv-align-left":-1!==this.align.indexOf("left")&&this.filledSlot,"vv-align-center":-1!==this.align.indexOf("center")&&this.filledSlot,"vv-align-right":-1!==this.align.indexOf("right")&&this.filledSlot}},assetClasses:function(){return{"vv-has-width":this.width,"vv-has-height":this.height,"vv-fill-asset":this.shouldFill,"vv-background-cover":"cover"===this.background,"vv-background-contain":"contain"===this.background,"vv-video-letterbox":"letterbox"===this.videoContainEffect,"vv-video-pillarbox":"pillarbox"===this.videoContainEffect}},transitionClasses:function(){return{"vv-fill":this.shouldFill}},slotClasses:function(){return{"vv-align-bottom":-1!==this.align.indexOf("bottom")&&this.filledSlot,"vv-align-middle":-1!==this.align.indexOf("middle")&&this.filledSlot,"vv-align-top":-1!==this.align.indexOf("top")&&this.filledSlot}},shimClasses:function(){return{"vv-align-bottom":-1!==this.align.indexOf("bottom")&&this.filledSlot,"vv-align-middle":-1!==this.align.indexOf("middle")&&this.filledSlot,"vv-align-top":-1!==this.align.indexOf("top")&&this.filledSlot}},displayBlock:function(){return this.aspect||this.background},shouldFill:function(){return this.fill||this.aspect||this.background},showShim:function(){switch(!1){case!this.aspect:case!(this.filledSlot&&this.hasVerticalAlign):return!0}},filledSlot:function(){return!!this.$slots.default},hasVerticalAlign:function(){return this.align.indexOf("bottom")||this.align.indexOf("middle")||this.align.indexOf("top")}},methods:{backgroundStyles:function(t){return{backgroundImage:"url('".concat(this[t+"Src"],"')"),backgroundPosition:this.backgroundPosition}}}},V={props:{transition:String,transitionPoster:String,transitionImage:String,transitionVideo:String,transitionLoader:String},computed:{posterShouldRender:function(){switch(!1){case!(this.imageShouldRender&&this.imageLoaded||this.videoShouldRender&&this.videoLoaded||this.fallbackShouldRender&&this.fallbackLoaded):return!1;default:return this.assetShouldRender("poster")}},imageShouldRender:function(){switch(!1){case!(this.videoShouldRender&&this.videoLoaded||this.fallbackShouldRender&&this.fallbackLoaded):return!1;default:return this.assetShouldRender("image")}},videoShouldRender:function(){switch(!1){case!this.useFallback:return!1;default:return this.assetShouldRender("video")}},fallbackShouldRender:function(){switch(!1){case!!this.useFallback:return!1;default:return this.assetShouldRender("fallback")}}},methods:{assetShouldRender:function(t){var e,i;switch(i=!!this.assetPropVal(t,"transition"),e=!0!==this.assetReadyToLoad(t),!1){case!!this[t+"Src"]:return!1;case!i:case!e:return this[t+"Loaded"];default:return!0}}}};k=function(t){var e;return"no"!==(null!=(e="undefined"!=typeof document&&null!==document?document.createElement("video"):void 0)?e.canPlayType(C(t)):void 0)},C=function(t){var e;switch(null!=(e=t.match(/\.(\w+)/))?e[1]:void 0){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}};var _,$,A={props:{autoplay:[String,Boolean],autopause:String,loop:Boolean,muted:Boolean,controls:Boolean},data:function(){return{videoNativeWidth:null,videoNativeHeight:null,playing:!1}},computed:{canPlayVideo:function(){var t,e,i,o;if(!this.video)return!1;for(t=0,e=(i=this.videoSources).length;t<e;t++)if(o=i[t],k(o))return!0;return!1},canAutoplayVideo:function(){switch(!1){case!("undefined"!=typeof navigator&&null!==navigator?navigator.userAgent.match(/BlackBerry/i):void 0):case!(("undefined"!=typeof navigator&&null!==navigator?navigator.userAgent.match(/(iPhone|iPod)/gi):void 0)&&!("playsInline"in document.createElement("video"))):return!1;default:return!0}},videoSources:function(){switch(!1){case"string"!=typeof this.video:return[this.video];case"array"!=typeof this.video:return this.video}},videoNativeAspect:function(){return this.videoNativeWidth/this.videoNativeHeight},videoContainEffect:function(){if(this.videoNativeAspect)return this.containerAspect>this.videoNativeAspect?"pillarbox":"letterbox"}},watch:{playing:function(){return this.$refs.video?this.playing?this.$refs.video.play():this.$refs.video.pause():this.playing=!1},autoplay:function(){return this.respondToAutoplay()},autopause:function(){return this.respondToAutopause()},videoLoaded:function(){return this.respondToAutoplay()},videoInViewport:function(t){return t?this.respondToAutoplay():this.respondToAutopause()}},methods:{play:function(){return this.playing=!0},pause:function(){return this.playing=!1},restart:function(){return this.$refs.video&&(this.$refs.video.currentTime=0),this.play()},togglePlayback:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null?this.togglePlayback(!this.playing):this.pause()},respondToAutoplay:function(){var t;switch(!1){case!0!==(t=this.autoplay)&&""!==t:case!("visible"===this.autoplay&&this.videoInViewport):return this.play()}},respondToAutopause:function(){switch(!1){case!("visible"===this.autopause&&!this.videoInViewport):return this.pause()}},mime:function(t){return C(t)}}},x=i(4),P=i.n(x),R=function(t){var e;if(t(),"loading"===("undefined"!=typeof document&&null!==document?document.readyState:void 0))return document.addEventListener("readystatechange",e=function(){if(t(),"complete"===document.readyState)return document.removeEventListener("readystatechange",e)})};$=[],_=function(){var t,e,i,o;for(i=[],t=0,e=$.length;t<e;t++)o=$[t],i.push(o.handleWindowResizeThrottled());return i},"undefined"!=typeof window&&null!==window&&window.addEventListener("resize",function(){return _()}),R(_);var T=function(t,e,i,o,n,s,a,r){var d,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),a?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=d):n&&(d=r?function(){n.call(this,this.$root.$options.shadowRoot)}:n),d)if(l.functional){l._injectStyles=d;var u=l.render;l.render=function(t,e){return d.call(e),u(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return{exports:t,options:l}}({name:"VueVisual",mixins:[n,d,p,S,O,V,A,{props:{offset:{type:[Number,String,Object],default:0},offsetPoster:[Number,String,Object],offsetImage:[Number,String,Object],offsetVideo:[Number,String,Object]},data:function(){return{windowWidth:null,containerWidth:null,containerHeight:null,posterInViewport:null,imageInViewport:null,videoInViewport:null}},mounted:function(){var t=this;return this.shouldWatchComponentSize&&($.push(this),this.handleWindowResize(),this.handleWindowResizeThrottled=h()(this.handleWindowResize,100)),["poster","image","video"].forEach(function(e){return t.$watch(function(){return t.assetScrollId(e)},function(i){return i?t.addScrollListeners(e):t.removeScrollListeners(e)},{immediate:!0})})},destroyed:function(){var t,e,i,o;for(e=0,i=(o=["poster","image","video"]).length;e<i;e++)t=o[e],this.removeScrollListeners(t);return $.splice($.indexOf(this),1)},methods:{assetScrollId:function(t){var e;if(this.assetUsesScroll(t))return e=this.assetPropVal(t,"offset"),JSON.stringify(e)},assetUsesScroll:function(t){switch(!1){case!!this[t]:return!1;case"visible"!==this.assetPropVal(t,"load"):case!("video"===t&&"visible"===this.autoplay):case!("video"===t&&"visible"===this.autopause):return!0}},addScrollListeners:function(t){var e,i=this;if(this.removeScrollListeners(t),this.$el&&this[t])return"string"==typeof(e=this.assetPropVal(t,"offset"))&&(e=parseInt(e,10)),this[t+"ScrollMonitor"]=P.a.create(this.$el,e),this[t+"ScrollMonitor"].on("stateChange",function(){return i.updateInViewport(t)}),R(function(){return i.$nextTick(function(){return window.dispatchEvent(new CustomEvent("scroll"))}),i.updateInViewport(t)})},updateInViewport:function(t){if(this[t+"ScrollMonitor"])return this[t+"InViewport"]=this[t+"ScrollMonitor"].isInViewport,this.canRemoveScrollListeners(t)?this.removeScrollListeners(t):void 0},canRemoveScrollListeners:function(t){return!!this[t+"InViewport"]&&(!(t="video")||("visible"===this.autoplay||"visible"===this.autopause))},removeScrollListeners:function(t){if(this[t+"ScrollMonitor"])return this[t+"ScrollMonitor"].destroy(),delete this[t+"ScrollMonitor"]},handleWindowResize:function(){if(this.windowWidth=window.innerWidth,this.shouldWatchComponentSize)return this.updateContainerSize()},updateContainerSize:function(){if(this.containerWidth=this.$el.offsetWidth,this.video||this.watchSize)return this.containerHeight=this.$el.offsetHeight}}}],methods:{assetPropVal:function(t,e){var i,o;return"fallback"!==t||"load"!==e&&"offset"!==e&&"transition"!==e||(t="video"),null!=(i=this[e+((o=t)&&o[0].toUpperCase()+o.slice(1))])?i:this[e]}},setDefaults:function(t){var e,i,o;for(e in i=[],t)o=t[e],i.push(this.props[e].default=o);return i}},o,[],!1,null,null,null);T.options.__file="index.vue";e.default=T.exports}]);